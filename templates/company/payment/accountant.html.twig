{% extends 'dashboard.html.twig' %}

{% block title %}Suivi des Paiements de la Société{% endblock %}

{% block body %}
    <div class="container mx-auto mt-8 p-4">
        <h1 class="text-3xl font-bold mb-8">Suivi des Paiements de la société {{ companyName }}</h1>
        <div class="overflow-x-auto">
            <table class="w-full table-auto">
                <thead>
                    <tr class="bg-gray-200">
                        <th class="px-4 py-2 border border-gray-400 text-left">ID Facture</th>
                        <th class="px-4 py-2 border border-gray-400 text-left">Nom Client</th>
                        <th class="px-4 py-2 border border-gray-400 text-left">Prénom Client</th>
                        <th class="px-4 py-2 border border-gray-400 text-left">Date de Création</th>
                        {% if is_granted('ROLE_ACCOUNTANT') %}
                            <th class="px-4 py-2 border border-gray-400 text-left">Statut de Paiement</th>
                        {% endif %}
                        <th class="px-4 py-2 border border-gray-400 text-left">Total</th>
                    </tr>
                </thead>
                <tbody>
                    {% for invoice in invoices %}
                        <tr class="{{ loop.index is odd ? 'bg-white' : 'bg-gray-200' }}">
                            <td class="px-4 py-2 border border-gray-400">{{ invoice.id }}</td>
                            <td class="px-4 py-2 border border-gray-400">{{ invoice.userReference.lastName }}</td>
                            <td class="px-4 py-2 border border-gray-400">{{ invoice.userReference.firstName }}</td>
                            <td class="px-4 py-2 border border-gray-400">{{ invoice.creationDate|date('Y-m-d') }}</td>
                            {% if is_granted('ROLE_ACCOUNTANT') %}
                                <td class="px-4 py-2 border border-gray-400">{{ invoice.paymentStatus }}</td>
                            {% endif %}
                            <td class="px-4 py-2 border border-gray-400">{{ invoice.totalTTC }}</td>
                        </tr>
                    {% else %}
                        <tr>
                            <td class="px-4 py-2 border border-gray-400" colspan="{% if is_granted('ROLE_ACCOUNTANT') %}6{% else %}5{% endif %}">Aucune facture trouvée</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
